openapi: 3.1.0
info:
  title: Polymarket API
  description: Polymarket API Reference
  license:
    name: MIT
  version: 1.0.0
servers:
  - url: api.polymarket.com
tags:
  - name: Trade
    description: Trade endpoints
paths:
  /order:
    post:
      summary: Post a new order
      description: |
        Creates a new order in the order book
      operationId: postOrder
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SendOrder"
            examples:
              example:
                summary: Send order example
                value:
                  order:
                    maker: "0x1234567890123456789012345678901234567890"
                    signer: "0x1234567890123456789012345678901234567890"
                    taker: "0x0000000000000000000000000000000000000000"
                    tokenId: "0xabc123def456..."
                    makerAmount: "100000000"
                    takerAmount: "200000000"
                    side: "BUY"
                    expiration: "1735689600"
                    nonce: "0"
                    feeRateBps: "30"
                    signature: "0x1234abcd..."
                    salt: 1234567890
                    signatureType: 0
                  owner: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
                  orderType: "GTC"
                  deferExec: false
      responses:
        "200":
          description: Order successfully processed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SendOrderResponse"
              examples:
                live_order:
                  summary: Order placed on book
                  value:
                    success: true
                    orderID: "0xabcdef1234567890abcdef1234567890abcdef12"
                    status: "live"
                    makingAmount: "100000000"
                    takingAmount: "200000000"
                    errorMsg: ""
                matched_order:
                  summary: Order immediately matched
                  value:
                    success: true
                    orderID: "0xabcdef1234567890abcdef1234567890abcdef12"
                    status: "matched"
                    makingAmount: "100000000"
                    takingAmount: "200000000"
                    transactionsHashes:
                      - "0x1234567890abcdef1234567890abcdef12345678"
                    tradeIDs:
                      - "trade-123"
                    errorMsg: ""
                delayed_order:
                  summary: Order delayed
                  value:
                    success: true
                    orderID: "0xabcdef1234567890abcdef1234567890abcdef12"
                    status: "delayed"
                    makingAmount: "100000000"
                    takingAmount: "200000000"
                    errorMsg: ""
        "400":
          description: Bad request - Invalid order payload or validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalid_payload:
                  summary: Invalid order payload
                  value:
                    error: "Invalid order payload"
                owner_mismatch:
                  summary: Owner mismatch
                  value:
                    error: "the order owner has to be the owner of the API KEY"
                signer_mismatch:
                  summary: Signer mismatch
                  value:
                    error: "the order signer address has to be the address of the API KEY"
                banned_address:
                  summary: Banned address
                  value:
                    error: "'0x1234...' address banned"
                closed_only_mode:
                  summary: Closed only mode violation
                  value:
                    error: "'0x1234...' address in closed only mode"
                invalid_order:
                  summary: Invalid order details
                  value:
                    error: "order 0xabc... is invalid. Price (100) breaks minimum tick size rule: 0.1"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "could not insert order"
        "503":
          description: Service unavailable - Trading disabled or cancel-only mode
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                trading_disabled:
                  summary: Trading disabled
                  value:
                    error: "Trading is currently disabled. Check polymarket.com for updates"
                cancel_only:
                  summary: Cancel-only mode
                  value:
                    error: "Trading is currently cancel-only. New orders are not accepted, but cancels are allowed."
    delete:
      summary: Cancel single order
      description: |
        Cancels a single order by its ID. Works even in cancel-only mode.
      operationId: cancelOrder
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CancelOrderPayload"
            example:
              orderID: "0xabcdef1234567890abcdef1234567890abcdef12"
      responses:
        "200":
          description: Order cancellation result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelOrdersResponse"
              examples:
                canceled:
                  summary: Order successfully canceled
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                    not_canceled: {}
                not_canceled:
                  summary: Order could not be canceled
                  value:
                    canceled: []
                    not_canceled:
                      "0xabcdef1234567890abcdef1234567890abcdef12": "Order not found or already canceled"
        "400":
          description: Bad request - Invalid order ID or payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalid_order_id:
                  summary: Invalid order ID
                  value:
                    error: "Invalid orderID"
                invalid_payload:
                  summary: Invalid payload
                  value:
                    error: "Invalid order payload"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
        "503":
          description: Service unavailable - Trading disabled (cancels still work in cancel-only mode)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Trading is currently disabled. Check polymarket.com for updates"

  /orders:
    post:
      summary: Post multiple orders
      description: |
        Creates multiple new orders in the order book. Orders are processed in parallel.
        Maximum 15 orders per request.
      operationId: postOrders
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/SendOrder"
              maxItems: 15
            examples:
              example:
                summary: Send multiple orders example
                value:
                  - order:
                      maker: "0x1234567890123456789012345678901234567890"
                      signer: "0x1234567890123456789012345678901234567890"
                      taker: "0x0000000000000000000000000000000000000000"
                      tokenId: "0xabc123def456..."
                      makerAmount: "100000000"
                      takerAmount: "200000000"
                      side: "BUY"
                      expiration: "1735689600"
                      nonce: "0"
                      feeRateBps: "30"
                      signature: "0x1234abcd..."
                      salt: 1234567890
                      signatureType: 0
                    owner: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
                    orderType: "GTC"
                    deferExec: false
                  - order:
                      maker: "0x1234567890123456789012345678901234567890"
                      signer: "0x1234567890123456789012345678901234567890"
                      taker: "0x0000000000000000000000000000000000000000"
                      tokenId: "0xdef456abc789..."
                      makerAmount: "200000000"
                      takerAmount: "100000000"
                      side: "SELL"
                      expiration: "1735689600"
                      nonce: "0"
                      feeRateBps: "30"
                      signature: "0x5678efgh..."
                      salt: 1234567891
                      signatureType: 0
                    owner: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
                    orderType: "GTC"
                    deferExec: false
      responses:
        "200":
          description: Orders successfully processed. Returns an array of order responses, one for each order in the request.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SendOrderResponse"
              examples:
                mixed_results:
                  summary: Mixed order results
                  value:
                    - success: true
                      orderID: "0xabcdef1234567890abcdef1234567890abcdef12"
                      status: "live"
                      makingAmount: "100000000"
                      takingAmount: "200000000"
                      errorMsg: ""
                    - success: true
                      orderID: "0xfedcba0987654321fedcba0987654321fedcba09"
                      status: "matched"
                      makingAmount: "200000000"
                      takingAmount: "100000000"
                      transactionsHashes:
                        - "0x1234567890abcdef1234567890abcdef12345678"
                      tradeIDs:
                        - "trade-123"
                      errorMsg: ""
                    - success: false
                      orderID: ""
                      status: ""
                      errorMsg: "Rate limit exceeded for tokenId: 0xdef456abc789..."
        "400":
          description: Bad request - Invalid order payload or validation error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalid_payload:
                  summary: Invalid order payload
                  value:
                    error: "Invalid order payload"
                empty_payload:
                  summary: Empty orders array
                  value:
                    error: "Invalid order payload"
                too_many_orders:
                  summary: Too many orders
                  value:
                    error: "Too many orders in payload: 20, max allowed: 15"
                owner_mismatch:
                  summary: Owner mismatch
                  value:
                    error: "the order owner has to be the owner of the API KEY"
                signer_mismatch:
                  summary: Signer mismatch
                  value:
                    error: "the order signer address has to be the address of the API KEY"
                banned_address:
                  summary: Banned address
                  value:
                    error: "'0x1234...' address banned"
                closed_only_mode:
                  summary: Closed only mode violation
                  value:
                    error: "'0x1234...' address in closed only mode"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "could not insert order"
        "503":
          description: Service unavailable - Trading disabled or cancel-only mode
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                trading_disabled:
                  summary: Trading disabled
                  value:
                    error: "Trading is currently disabled. Check polymarket.com for updates"
                cancel_only:
                  summary: Cancel-only mode
                  value:
                    error: "Trading is currently cancel-only. New orders are not accepted, but cancels are allowed."
    get:
      summary: Get user orders
      description: |
        Retrieves open orders for the authenticated user. Returns paginated results.
      operationId: getOrders
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      parameters:
        - name: id
          in: query
          description: Order ID (hash) to filter by specific order
          required: false
          schema:
            type: string
          example: "0xabcdef1234567890abcdef1234567890abcdef12"
        - name: market
          in: query
          description: Market (condition ID) to filter orders
          required: false
          schema:
            type: string
          example: "0x0000000000000000000000000000000000000000000000000000000000000001"
        - name: asset_id
          in: query
          description: Asset ID (token ID) to filter orders
          required: false
          schema:
            type: string
          example: "0xabc123def456..."
        - name: next_cursor
          in: query
          description: Cursor for pagination (base64 encoded offset)
          required: false
          schema:
            type: string
          example: "MA=="
      responses:
        "200":
          description: Successfully retrieved orders
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrdersResponse"
              examples:
                example:
                  summary: User orders response
                  value:
                    limit: 100
                    next_cursor: "MTAw"
                    count: 2
                    data:
                      - id: "0xabcdef1234567890abcdef1234567890abcdef12"
                        status: "ORDER_STATUS_LIVE"
                        owner: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
                        maker_address: "0x1234567890123456789012345678901234567890"
                        market: "0x0000000000000000000000000000000000000000000000000000000000000001"
                        asset_id: "0xabc123def456..."
                        side: "BUY"
                        original_size: "100000000"
                        size_matched: "0"
                        price: "0.5"
                        outcome: "YES"
                        expiration: "1735689600"
                        order_type: "GTC"
                        associate_trades: []
                        created_at: 1700000000
                      - id: "0xfedcba0987654321fedcba0987654321fedcba09"
                        status: "ORDER_STATUS_LIVE"
                        owner: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
                        maker_address: "0x1234567890123456789012345678901234567890"
                        market: "0x0000000000000000000000000000000000000000000000000000000000000002"
                        asset_id: "0xdef456abc789..."
                        side: "SELL"
                        original_size: "200000000"
                        size_matched: "50000000"
                        price: "0.75"
                        outcome: "NO"
                        expiration: "1735689600"
                        order_type: "GTC"
                        associate_trades:
                          - "trade-123"
                        created_at: 1700000001
        "400":
          description: Bad request - Invalid parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "invalid order params payload"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"

    delete:
      summary: Cancel multiple orders
      description: |
        Cancels multiple orders by their IDs. Maximum 3000 orders per request.
        Duplicate order IDs in the request are automatically ignored.
        Works even in cancel-only mode.
      operationId: cancelOrders
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
              maxItems: 3000
            example:
              - "0xabcdef1234567890abcdef1234567890abcdef12"
              - "0xfedcba0987654321fedcba0987654321fedcba09"
              - "0x1234567890abcdef1234567890abcdef12345678"
      responses:
        "200":
          description: Cancellation results for all orders
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelOrdersResponse"
              examples:
                all_canceled:
                  summary: All orders canceled
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                      - "0xfedcba0987654321fedcba0987654321fedcba09"
                      - "0x1234567890abcdef1234567890abcdef12345678"
                    not_canceled: {}
                mixed:
                  summary: Some orders canceled, some not
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                      - "0xfedcba0987654321fedcba0987654321fedcba09"
                    not_canceled:
                      "0x1234567890abcdef1234567890abcdef12345678": "Order already matched"
                partial:
                  summary: Partial cancellation
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                    not_canceled:
                      "0xfedcba0987654321fedcba0987654321fedcba09": "Order not found"
                      "0x1234567890abcdef1234567890abcdef12345678": "Order already canceled"
        "400":
          description: Bad request - Invalid order IDs or payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalid_order_id:
                  summary: Invalid order ID
                  value:
                    error: "Invalid orderID"
                invalid_payload:
                  summary: Invalid payload
                  value:
                    error: "Invalid order payload"
                too_many_orders:
                  summary: Too many orders
                  value:
                    error: "Too many orders in payload, max allowed: 3000"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
        "503":
          description: Service unavailable - Trading disabled (cancels still work in cancel-only mode)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Trading is currently disabled. Check polymarket.com for updates"

  /order/{orderID}:
    get:
      summary: Get single order by ID
      description: |
        Retrieves a specific order by its ID (order hash) for the authenticated user.
      operationId: getOrder
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      parameters:
        - name: orderID
          in: path
          description: Order ID (order hash)
          required: true
          schema:
            type: string
          example: "0x0000000000000000000000000000000000000000000000000000000000000001"
      responses:
        "200":
          description: Successfully retrieved order
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OpenOrder"
              example:
                id: "0xabcdef1234567890abcdef1234567890abcdef12"
                status: "ORDER_STATUS_LIVE"
                owner: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
                maker_address: "0x1234567890123456789012345678901234567890"
                market: "0x0000000000000000000000000000000000000000000000000000000000000001"
                asset_id: "0xabc123def456..."
                side: "BUY"
                original_size: "100000000"
                size_matched: "0"
                price: "0.5"
                outcome: "YES"
                expiration: "1735689600"
                order_type: "GTC"
                associate_trades: []
                created_at: 1700000000
        "400":
          description: Bad request - Invalid order ID
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid orderID"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "404":
          description: Order not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Order not found"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
  /cancel-all:
    delete:
      summary: Cancel all orders
      description: |
        Cancels all open orders for the authenticated user. Works even in cancel-only mode.
      operationId: cancelAllOrders
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      responses:
        "200":
          description: Cancellation results for all orders
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelOrdersResponse"
              examples:
                canceled:
                  summary: All orders canceled
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                      - "0xfedcba0987654321fedcba0987654321fedcba09"
                    not_canceled: {}
                mixed:
                  summary: Some orders canceled, some not
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                    not_canceled:
                      "0xfedcba0987654321fedcba0987654321fedcba09": "Order already matched"
                no_orders:
                  summary: No orders to cancel
                  value:
                    canceled: []
                    not_canceled: {}
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
        "503":
          description: Service unavailable - Trading disabled (cancels still work in cancel-only mode)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Trading is currently disabled. Check polymarket.com for updates"
  /cancel-market-orders:
    delete:
      summary: Cancel orders for a market
      description: |
        Cancels all open orders for the authenticated user in a specific market (condition) and asset.
        Works even in cancel-only mode.
      operationId: cancelMarketOrders
      tags:
        - Trade
      security:
        - polyApiKey: []
          polyAddress: []
          polySignature: []
          polyPassphrase: []
          polyTimestamp: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrderMarketCancelParams"
            example:
              market: "0x0000000000000000000000000000000000000000000000000000000000000001"
              asset_id: "0xabc123def456..."
      responses:
        "200":
          description: Cancellation results for market orders
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CancelOrdersResponse"
              examples:
                canceled:
                  summary: All market orders canceled
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                      - "0xfedcba0987654321fedcba0987654321fedcba09"
                    not_canceled: {}
                mixed:
                  summary: Some orders canceled, some not
                  value:
                    canceled:
                      - "0xabcdef1234567890abcdef1234567890abcdef12"
                    not_canceled:
                      "0xfedcba0987654321fedcba0987654321fedcba09": "Order already matched"
                no_orders:
                  summary: No orders found for this market
                  value:
                    canceled: []
                    not_canceled: {}
        "400":
          description: Bad request - Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid order payload"
        "401":
          description: Unauthorized - Invalid API key or authentication failed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid API key"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
        "503":
          description: Service unavailable - Trading disabled (cancels still work in cancel-only mode)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Trading is currently disabled. Check polymarket.com for updates"
  /address:
    get:
      tags:
        - Address
      summary: Get relay address
      description: |
        Gets the address used for executing transactions. 
        This is necessary for Transaction Requests with Type PROXY since the client must know the relayer address beforehand.
      operationId: getRelayAddress
      responses:
        "200":
          description: Successfully retrieved relay address
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AddressResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /nonce:
    get:
      tags:
        - Nonce
      summary: Get nonce
      description: |
        Gets the current Proxy or Safe nonce for a user.
        Takes in the user's signer address and the type of nonce to retrieve (PROXY or SAFE).
        Internally, this calls out to the nonce manager, which will either perform an RPC call
        to get the nonce from the chain or it will fetch the nonce from the nonce cache.
      operationId: getNonce
      parameters:
        - name: address
          in: query
          required: true
          description: The user's signer address
          schema:
            type: string
            pattern: "^0x[a-fA-F0-9]{40}$"
            example: "0x77837466dd64fb52ECD00C737F060d0ff5CCB575"
        - name: type
          in: query
          required: true
          description: The type of nonce to retrieve
          schema:
            type: string
            enum: [PROXY, SAFE]
            example: "PROXY"
      responses:
        "200":
          description: Successfully retrieved nonce
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NonceResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /relay-payload:
    get:
      tags:
        - Nonce
      summary: Get relay payload
      description: |
        Gets the relay payload (relay address + nonce) to be used by a Transaction Request.
        Takes in query param address, the signer address and type, SAFE or PROXY.
      operationId: getRelayPayload
      parameters:
        - name: address
          in: query
          required: true
          description: The user's signer address
          schema:
            type: string
            pattern: "^0x[a-fA-F0-9]{40}$"
            example: "0x77837466dd64fb52ECD00C737F060d0ff5CCB575"
        - name: type
          in: query
          required: true
          description: The type of nonce to retrieve
          schema:
            type: string
            enum: [PROXY, SAFE]
            example: "PROXY"
      responses:
        "200":
          description: Successfully retrieved relay payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RelayPayloadResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /transaction:
    get:
      tags:
        - Transaction
      summary: Get transaction
      description: Gets a transaction submitted to the Relayer by transaction ID
      operationId: getTransaction
      parameters:
        - name: id
          in: query
          required: true
          description: The transaction ID
          schema:
            type: string
            example: "0190b317-a1d3-7bec-9b91-eeb6dcd3a620"
      responses:
        "200":
          description: Successfully retrieved transaction
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Transaction"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Transaction not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /transactions:
    get:
      tags:
        - Transaction
      summary: Get user transactions
      description: |
        Gets the most recent transactions submitted to the Relayer, owned by a specific user.
        Authenticated using Polymarket auth cookies or Builder API Keys.
        - If authenticated with Gamma, returns transactions for the authenticated user's address
        - If authenticated with CLOB, returns transactions for the builder API key
      operationId: getTransactions
      security:
        - GammaAuth: []
        - ClobAuth: []
      responses:
        "200":
          description: Successfully retrieved transactions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Transaction"
        "401":
          description: Invalid authorization
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /submit:
    post:
      tags:
        - Transaction
      summary: Submit transaction
      description: |
        Submit a Transaction Request to the Relayer.
        Authenticated using Polymarket auth cookies or Builder API Keys.

        If authenticated with Gamma, the `owner` field will be automatically set to the authenticated user's address.
        If authenticated with CLOB, the `builder` field will be automatically set to the builder API key.
      operationId: submitTransaction
      security:
        - GammaAuth: []
        - ClobAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TransactionRequest"
            examples:
              safeTransaction:
                summary: SAFE transaction example
                value:
                  type: "SAFE"
                  from: "0x6e0c80c90ea6c15917308F820Eac91Ce2724B5b5"
                  to: "0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"
                  proxyWallet: "0x6d8c4e9aDF5748Af82Dabe2C6225207770d6B4fa"
                  data: "0x..."
                  nonce: "60"
                  signature: "0x01a060c734d7bdf4adde50c4a7e574036b1f8b12890911bdd1c1cfdcd77502381b89fa8a47c36f62a0b9f1cdfee7b260fd8108536db9f6b2089c02637e7de9fc20"
                  signatureParams:
                    gasPrice: "0"
                    operation: "0"
                    safeTxnGas: "0"
                    baseGas: "0"
                    gasToken: "0x0000000000000000000000000000000000000000"
                    refundReceiver: "0x0000000000000000000000000000000000000000"
                  metadata: ""
              proxyTransaction:
                summary: PROXY transaction example
                value:
                  type: "PROXY"
                  from: "0xe6f3bdb275ef4ad9a14630c7af65469ed09b095a"
                  to: "0xab45c5a4b0c941a2f231c04c3f49182e1a254052"
                  proxyWallet: "0xee07d558c79666232452C3bD88c0704f0837F564"
                  data: "0x34ee97910000000000000000000000000000000000000000000000000000000000000020..."
                  nonce: "3"
                  signature: "0x23c34c626796bab7a7f799888629f75fe75243f6a8fd71e8bcdb65621b929100766a442ce5f1c2b4495e0518ddfd2b0d7c72e53ce3c01787e0623af2ae6950f11c"
                  signatureParams:
                    relayerFee: "1"
                    gasPrice: "1"
                    gasLimit: "259463"
                    relayHub: "0xd216153c06e857cd7f72665e0af1d7d82172f494"
                    relay: "0xae700edfd9ab986395f3999fe11177b9903a52f1"
                  metadata: ""
      responses:
        "200":
          description: Transaction successfully submitted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TransactionResponse"
        "400":
          description: Invalid transaction request payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalidPayload:
                  value:
                    error: "invalid transaction request payload"
                invalidProxyWallet:
                  value:
                    error: "invalid 'proxyWallet' field"
                invalidSignature:
                  value:
                    error: "invalid signature"
        "401":
          description: Invalid authorization
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "429":
          description: Quota exceeded
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                internalError:
                  value:
                    error: "error inserting transaction"

  /deployed:
    get:
      tags:
        - Deployment
      summary: Check deployment status
      description: Returns a payload that determines if a safe is deployed. Takes in the user's Polymarket proxy address.
      operationId: getDeployed
      parameters:
        - name: address
          in: query
          required: true
          description: The user's Polymarket proxy address
          schema:
            type: string
            pattern: "^0x[a-fA-F0-9]{40}$"
            example: "0x6d8c4e9aDF5748Af82Dabe2C6225207770d6B4fa"
      responses:
        "200":
          description: Successfully retrieved deployment status
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeployedResponse"
        "400":
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
components:
  schemas:
    SendOrder:
      type: object
      required:
        - order
        - owner
      properties:
        order:
          $ref: "#/components/schemas/Order"
        owner:
          type: string
          description: UUID of the API key owner
          example: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
        orderType:
          type: string
          description: Time in force
          enum:
            - GTC
            - FOK
            - GTD
            - FAK
          default: GTC
        deferExec:
          type: boolean
          description: Whether to defer execution
          default: false
    Order:
      type: object
      required:
        - maker
        - signer
        - taker
        - tokenId
        - makerAmount
        - takerAmount
        - side
        - expiration
        - nonce
        - feeRateBps
        - signature
        - salt
        - signatureType
      properties:
        maker:
          type: string
          description: Ethereum address of the maker (In the default case, this is your proxy address)
          example: "0x1234567890123456789012345678901234567890"
        signer:
          type: string
          description: Ethereum address of the signer
          example: "0x1234567890123456789012345678901234567890"
        taker:
          type: string
          description: Ethereum address of the taker (0x0 for open orders)
          example: "0x0000000000000000000000000000000000000000"
        tokenId:
          type: string
          description: Token ID (asset ID) for the order
          example: "0xabc123def456..."
        makerAmount:
          type: string
          description: Amount the maker is providing in fixed-math with 6 decimals
          example: "100000000"
        takerAmount:
          type: string
          description: Amount the taker is providing in fixed-math with 6 decimals
          example: "200000000"
        side:
          type: string
          description: Order side
          enum:
            - BUY
            - SELL
          example: "BUY"
        expiration:
          type: string
          description: Unix timestamp when the order expires
          example: "1735689600"
        nonce:
          type: string
          description: Order nonce
          example: "0"
        feeRateBps:
          type: string
          description: Fee rate in basis points
          example: "30"
        signature:
          type: string
          description: Cryptographic signature of the order
          example: "0x1234abcd..."
        salt:
          type: integer
          description: Random salt for order uniqueness
          example: 1234567890
        signatureType:
          type: integer
          description: Type of signature (0 = EOA, 1 = POLY_PROXY, 2 = POLY_GNOSIS_SAFE)
          enum:
            - 0
            - 1
            - 2
    SendOrderResponse:
      type: object
      required:
        - success
        - orderID
        - status
      properties:
        success:
          type: boolean
          description: Whether the order was successfully processed
          example: true
        orderID:
          type: string
          description: Unique identifier for the order (order hash)
          example: "0xabcdef1234567890abcdef1234567890abcdef12"
        status:
          type: string
          description: Status of the order after processing
          enum:
            - live
            - matched
            - delayed
        makingAmount:
          type: string
          description: Amount the maker is providing in fixed-math with 6 decimals
          example: "100000000"
        takingAmount:
          type: string
          description: Amount the taker is providing in fixed-math with 6 decimals
          example: "200000000"
        transactionsHashes:
          type: array
          description: Array of transaction hashes (present when status is 'matched')
          items:
            type: string
          example:
            - "0x1234567890abcdef1234567890abcdef12345678"
        tradeIDs:
          type: array
          description: Array of trade IDs (present when status is 'matched')
          items:
            type: string
        errorMsg:
          type: string
          description: Error message (empty on success)
          example: ""
    OrdersResponse:
      type: object
      required:
        - limit
        - next_cursor
        - count
        - data
      properties:
        limit:
          type: integer
          description: Maximum number of results per page
          example: 100
        next_cursor:
          type: string
          description: Cursor for pagination (base64 encoded offset). Empty if no more results.
          example: "MTAw"
        count:
          type: integer
          description: Number of orders in this response
          example: 2
        data:
          type: array
          description: Array of open orders
          items:
            $ref: "#/components/schemas/OpenOrder"
    OpenOrder:
      type: object
      required:
        - id
        - status
        - owner
        - maker_address
        - market
        - asset_id
        - side
        - original_size
        - size_matched
        - price
        - expiration
        - order_type
        - created_at
        - outcome
      properties:
        id:
          type: string
          description: Order ID (order hash)
          example: "0xabcdef1234567890abcdef1234567890abcdef12"
        status:
          type: string
          description: Order status
          enum:
            - ORDER_STATUS_LIVE
            - ORDER_STATUS_INVALID
            - ORDER_STATUS_CANCELED_MARKET_RESOLVED
            - ORDER_STATUS_CANCELED
            - ORDER_STATUS_MATCHED
        owner:
          type: string
          description: UUID of the order owner
          example: "f4f247b7-4ac7-ff29-a152-04fda0a8755a"
        maker_address:
          type: string
          description: Ethereum address of the maker
          example: "0x1234567890123456789012345678901234567890"
        market:
          type: string
          description: Market (condition ID)
          example: "0x0000000000000000000000000000000000000000000000000000000000000001"
        asset_id:
          type: string
          description: Asset ID (token ID)
          example: "0xabc123def456..."
        side:
          type: string
          description: Order side
          enum:
            - BUY
            - SELL
          example: "BUY"
        original_size:
          type: string
          description: Original order size in fixed-math with 6 decimals
          example: "100000000"
        size_matched:
          type: string
          description: Size that has been matched in fixed-math with 6 decimals
          example: "0"
        price:
          type: string
          description: Order price
          example: "0.5"
        outcome:
          type: string
          description: Market outcome (YES/NO)
          example: "YES"
        expiration:
          type: string
          description: Unix timestamp when the order expires
          example: "1735689600"
        order_type:
          type: string
          description: Order type
          enum:
            - GTC
            - FOK
            - GTD
            - FAK
          example: "GTC"
        associate_trades:
          type: array
          description: Array of associated trade IDs
          items:
            type: string
          example:
            - "trade-123"
        created_at:
          type: integer
          description: Unix timestamp when the order was created
          example: 1700000000
    CancelOrderPayload:
      type: object
      required:
        - orderID
      properties:
        orderID:
          type: string
          description: Order ID (order hash) to cancel
          example: "0xabcdef1234567890abcdef1234567890abcdef12"

    CancelOrdersResponse:
      type: object
      required:
        - canceled
        - not_canceled
      properties:
        canceled:
          type: array
          description: Array of order IDs that were successfully canceled
          items:
            type: string
          example:
            - "0xabcdef1234567890abcdef1234567890abcdef12"
        not_canceled:
          type: object
          description: Map of order IDs that could not be canceled with error messages
          additionalProperties:
            type: string
          example:
            "0xabcdef1234567890abcdef1234567890abcdef12": "Order not found or already canceled"
    OrderMarketCancelParams:
      type: object
      required:
        - market
        - asset_id
      properties:
        market:
          type: string
          description: Market (condition ID)
          example: "0x0000000000000000000000000000000000000000000000000000000000000001"
        asset_id:
          type: string
          description: Asset ID (token ID)
          example: "0xabc123def456..."
    AddressResponse:
      type: object
      required:
        - address
      properties:
        address:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: The relayer address
          example: "0x4da9395388791c22684e03779c3de10934eb9cfb"

    NonceResponse:
      type: object
      required:
        - nonce
      properties:
        nonce:
          type: string
          description: The current nonce value
          example: "31"

    RelayPayloadResponse:
      type: object
      required:
        - address
        - nonce
      properties:
        address:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: The relayer address
          example: "0x4da9395388791c22684e03779c3de10934eb9cfb"
        nonce:
          type: string
          description: The current nonce value
          example: "31"

    DeployedResponse:
      type: object
      required:
        - deployed
      properties:
        deployed:
          type: boolean
          description: Whether the safe is deployed
          example: true

    TransactionRequest:
      type: object
      required:
        - type
        - from
        - to
        - proxyWallet
        - data
        - nonce
        - signature
        - signatureParams
      properties:
        type:
          type: string
          enum: [PROXY, SAFE, SAFE-CREATE]
          description: The type of transaction
          example: "SAFE"
        from:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: The sender address
          example: "0x6e0c80c90ea6c15917308F820Eac91Ce2724B5b5"
        to:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: The recipient address
          example: "0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"
        proxyWallet:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: The proxy wallet address
          example: "0x6d8c4e9aDF5748Af82Dabe2C6225207770d6B4fa"
        value:
          type: string
          description: The transaction value in wei (hex string)
          example: "0"
        data:
          type: string
          pattern: "^0x[a-fA-F0-9]*$"
          description: The transaction data (hex string)
          example: "0x..."
        nonce:
          type: string
          description: The transaction nonce
          example: "60"
        signature:
          type: string
          pattern: "^0x[a-fA-F0-9]{130}$"
          description: The transaction signature (hex string with 0x prefix)
          example: "0x01a060c734d7bdf4adde50c4a7e574036b1f8b12890911bdd1c1cfdcd77502381b89fa8a47c36f62a0b9f1cdfee7b260fd8108536db9f6b2089c02637e7de9fc20"
        signatureParams:
          $ref: "#/components/schemas/SignatureParams"
        metadata:
          type: string
          description: Optional metadata string (sanitized for ASCII only, no profanity)
          example: ""

    SignatureParams:
      type: object
      description: |
        Signature parameters that vary based on transaction type.
        For PROXY transactions, use relayHub-specific parameters.
        For SAFE transactions, use Safe-specific parameters.
        For SAFE-CREATE transactions, use Safe creation parameters.
      properties:
        # Common parameters
        gasPrice:
          type: string
          description: Gas price in wei (hex string)
          example: "0"

        # RelayHub specific (PROXY transactions)
        relayerFee:
          type: string
          description: Relayer fee in wei (hex string). Required for PROXY transactions.
          example: "1"
        gasLimit:
          type: string
          description: Gas limit. Required for PROXY transactions.
          example: "259463"
        relayHub:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: RelayHub contract address. Required for PROXY transactions.
          example: "0xd216153c06e857cd7f72665e0af1d7d82172f494"
        relay:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Relayer address. Required for PROXY transactions.
          example: "0xae700edfd9ab986395f3999fe11177b9903a52f1"

        # SAFE specific parameters
        operation:
          type: string
          description: Operation type (0 = CALL, 1 = DELEGATECALL). Required for SAFE transactions.
          example: "0"
        safeTxnGas:
          type: string
          description: Safe transaction gas. Required for SAFE transactions.
          example: "0"
        baseGas:
          type: string
          description: Base gas. Required for SAFE transactions.
          example: "0"
        gasToken:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Gas token address. Required for SAFE transactions.
          example: "0x0000000000000000000000000000000000000000"
        refundReceiver:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Refund receiver address. Required for SAFE transactions.
          example: "0x0000000000000000000000000000000000000000"

        # SAFE-CREATE specific parameters
        paymentToken:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Payment token address. Required for SAFE-CREATE transactions.
          example: "0x0000000000000000000000000000000000000000"
        payment:
          type: string
          description: Payment amount in wei (hex string). Required for SAFE-CREATE transactions.
          example: "0"
        paymentReceiver:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Payment receiver address. Required for SAFE-CREATE transactions.
          example: "0x0000000000000000000000000000000000000000"

    TransactionResponse:
      type: object
      required:
        - transactionID
        - state
      properties:
        transactionID:
          type: string
          description: Unique transaction identifier
          example: "0190b317-a1d3-7bec-9b91-eeb6dcd3a620"
        transactionHash:
          type: string
          pattern: "^0x[a-fA-F0-9]{64}$"
          description: Blockchain transaction hash (available after execution)
          example: "0x38cbfbeae8fffa4e2b187ee5978d3ee9cafc53af0363ed90a35b7ea9016535d8"
        state:
          type: string
          enum:
            [
              STATE_NEW,
              STATE_EXECUTED,
              STATE_MINED,
              STATE_CONFIRMED,
              STATE_INVALID,
              STATE_FAILED,
            ]
          description: Current state of the transaction
          example: "STATE_NEW"

    Transaction:
      type: object
      required:
        - transactionID
        - transactionHash
        - from
        - to
        - proxyAddress
        - data
        - nonce
        - value
        - signature
        - state
        - type
        - owner
        - metadata
        - createdAt
        - updatedAt
      properties:
        transactionID:
          type: string
          description: Unique transaction identifier
          example: "0190b317-a1d3-7bec-9b91-eeb6dcd3a620"
        transactionHash:
          type: string
          pattern: "^0x[a-fA-F0-9]{64}$"
          description: Blockchain transaction hash
          example: "0x38cbfbeae8fffa4e2b187ee5978d3ee9cafc53af0363ed90a35b7ea9016535d8"
        from:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Sender address
          example: "0x6e0c80c90ea6c15917308f820eac91ce2724b5b5"
        to:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Recipient address
          example: "0x2791bca1f2de4661ed88a30c99a7a9449aa84174"
        proxyAddress:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Proxy wallet address
          example: "0x6d8c4e9adf5748af82dabe2c6225207770d6b4fa"
        data:
          type: string
          pattern: "^0x[a-fA-F0-9]*$"
          description: Transaction data (hex string)
          example: "0x..."
        nonce:
          type: string
          description: Transaction nonce
          example: "60"
        value:
          type: string
          description: Transaction value in wei
          example: ""
        signature:
          type: string
          pattern: "^0x[a-fA-F0-9]{130}$"
          description: Transaction signature (hex string)
          example: "0x01a060c734d7bdf4adde50c4a7e574036b1f8b12890911bdd1c1cfdcd77502381b89fa8a47c36f62a0b9f1cdfee7b260fd8108536db9f6b2089c02637e7de9fc20"
        state:
          type: string
          enum:
            [
              STATE_NEW,
              STATE_EXECUTED,
              STATE_MINED,
              STATE_CONFIRMED,
              STATE_INVALID,
              STATE_FAILED,
            ]
          description: Current state of the transaction
          example: "STATE_CONFIRMED"
        type:
          type: string
          enum: [PROXY, SAFE, SAFE-CREATE]
          description: Transaction type
          example: "SAFE"
        owner:
          type: string
          pattern: "^0x[a-fA-F0-9]{40}$"
          description: Owner address (set automatically for Gamma auth)
          example: "0x6e0c80c90ea6c15917308f820eac91ce2724b5b5"
        builder:
          type: string
          description: Builder API key (set automatically for CLOB auth)
          example: "builder-api-key-123"
        metadata:
          type: string
          description: Optional metadata
          example: ""
        createdAt:
          type: string
          format: date-time
          description: Transaction creation timestamp
          example: "2024-07-14T21:13:08.819782Z"
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2024-07-14T21:13:46.576639Z"
        sigParams:
          $ref: "#/components/schemas/SignatureParams"
          description: Signature parameters (optional in response)
    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: Error message

  securitySchemes:
    polyApiKey:
      type: apiKey
      in: header
      name: POLY_API_KEY
      description: Your API key
    polyAddress:
      type: apiKey
      in: header
      name: POLY_ADDRESS
      description: Ethereum address associated with the API key
    polySignature:
      type: apiKey
      in: header
      name: POLY_SIGNATURE
      description: HMAC signature of the request
    polyPassphrase:
      type: apiKey
      in: header
      name: POLY_PASSPHRASE
      description: API key passphrase
    polyTimestamp:
      type: apiKey
      in: header
      name: POLY_TIMESTAMP
      description: Unix timestamp of the request

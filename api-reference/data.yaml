openapi: 3.1.0
info:
  title: Polymarket API
  description: Polymarket API Reference
  license:
    name: MIT
  version: 1.0.0
servers:
  - url: api.polymarket.com
tags:
  - name: Data
    description: Data endpoints
paths:
  /time:
    get:
      summary: Get server time
      description: |
        Returns the current Unix timestamp of the server.
        This can be used to synchronize client time with server time.
      operationId: getTime
      tags:
        - Data
      responses:
        "200":
          description: Successfully retrieved server time
          content:
            application/json:
              schema:
                type: integer
                format: int64
                description: Unix timestamp (seconds since epoch)
              example: 1234567890
  /midpoint:
    get:
      summary: Get midpoint price
      description: |
        Retrieves the midpoint price for a specific token ID.
        The midpoint is calculated as the average of the best bid and best ask prices.
      operationId: getMidpoint
      tags:
        - Data
      parameters:
        - name: token_id
          in: query
          description: Token ID (asset ID)
          required: true
          schema:
            type: string
          example: "0xabc123def456..."
      responses:
        "200":
          description: Successfully retrieved midpoint price
          content:
            application/json:
              schema:
                type: object
                required:
                  - mid_price
                properties:
                  mid_price:
                    type: string
                    description: Midpoint price as a string
                    example: "0.45"
        "400":
          description: Bad request - Invalid token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid token id"
        "404":
          description: Not found - No orderbook exists for the requested token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "No orderbook exists for the requested token id"
  /midpoints:
    get:
      summary: Get midpoint prices (query parameters)
      description: |
        Retrieves midpoint prices for multiple token IDs using query parameters.
        The midpoint is calculated as the average of the best bid and best ask prices.
      operationId: getMidpointsGet
      tags:
        - Market Data
      parameters:
        - name: token_ids
          in: query
          description: Comma-separated list of token IDs
          required: true
          schema:
            type: string
          example: "0xabc123...,0xdef456..."
      responses:
        "200":
          description: Successfully retrieved midpoint prices
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: string
                description: Map of token ID to midpoint price
              example:
                "0xabc123def456...": "0.45"
                "0xdef456abc123...": "0.52"
        "400":
          description: Bad request - Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid payload"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "error getting the mid price"
    post:
      summary: Get midpoint prices (request body)
      description: |
        Retrieves midpoint prices for multiple token IDs using a request body.
        The midpoint is calculated as the average of the best bid and best ask prices.
      operationId: getMidpointsPost
      tags:
        - Market Data
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/BookRequest"
            example:
              - token_id: "0xabc123def456..."
              - token_id: "0xdef456abc123..."
      responses:
        "200":
          description: Successfully retrieved midpoint prices
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: string
                description: Map of token ID to midpoint price
              example:
                "0xabc123def456...": "0.45"
                "0xdef456abc123...": "0.52"
        "400":
          description: Bad request - Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid payload"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "error getting the mid price"
  /spread:
    get:
      summary: Get spread
      description: |
        Retrieves the spread for a specific token ID.
        The spread is the difference between the best ask and best bid prices.
      operationId: getSpread
      tags:
        - Market Data
      parameters:
        - name: token_id
          in: query
          description: Token ID (asset ID)
          required: true
          schema:
            type: string
          example: "0xabc123def456..."
      responses:
        "200":
          description: Successfully retrieved spread
          content:
            application/json:
              schema:
                type: object
                required:
                  - spread
                properties:
                  spread:
                    type: string
                    description: Spread as a string
                    example: "0.02"
        "400":
          description: Bad request - Invalid token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid token id"
        "404":
          description: Not found - No orderbook exists for the requested token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "No orderbook exists for the requested token id"
  /spreads:
    post:
      summary: Get spreads
      description: |
        Retrieves spreads for multiple token IDs.
        The spread is the difference between the best ask and best bid prices.
      operationId: getSpreads
      tags:
        - Market Data
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/BookRequest"
            example:
              - token_id: "0xabc123def456..."
              - token_id: "0xdef456abc123..."
      responses:
        "200":
          description: Successfully retrieved spreads
          content:
            application/json:
              schema:
                type: object
                additionalProperties:
                  type: string
                description: Map of token ID to spread
              example:
                "0xabc123def456...": "0.02"
                "0xdef456abc123...": "0.015"
        "400":
          description: Bad request - Invalid payload
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid payload"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "error getting the spread"
  /last-trade-price:
    get:
      summary: Get last trade price
      description: |
        Retrieves the last trade price and side for a specific token ID.
        Returns default values of "0.5" for price and empty string for side if no trades found.
      operationId: getLastTradePrice
      tags:
        - Market Data
      parameters:
        - name: token_id
          in: query
          description: Token ID (asset ID)
          required: true
          schema:
            type: string
          example: "0xabc123def456..."
      responses:
        "200":
          description: Successfully retrieved last trade price
          content:
            application/json:
              schema:
                type: object
                required:
                  - price
                  - side
                properties:
                  price:
                    type: string
                    description: Last trade price
                    example: "0.45"
                  side:
                    type: string
                    description: Last trade side (BUY or SELL)
                    enum:
                      - BUY
                      - SELL
                      - ""
                    example: "BUY"
        "400":
          description: Bad request - Invalid token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid token id"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
  /last-trades-prices:
    get:
      summary: Get last trade prices (query parameters)
      description: |
        Retrieves last trade prices for multiple token IDs using query parameters.
        Maximum 500 token IDs can be requested per call.
      operationId: getLastTradesPricesGet
      tags:
        - Market Data
      parameters:
        - name: token_ids
          in: query
          description: Comma-separated list of token IDs (max 500)
          required: true
          schema:
            type: string
          example: "0xabc123...,0xdef456..."
      responses:
        "200":
          description: Successfully retrieved last trade prices
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  required:
                    - token_id
                    - price
                    - side
                  properties:
                    token_id:
                      type: string
                      description: Token ID (asset ID)
                      example: "0xabc123def456..."
                    price:
                      type: string
                      description: Last trade price
                      example: "0.45"
                    side:
                      type: string
                      description: Last trade side (BUY or SELL)
                      enum:
                        - BUY
                        - SELL
                      example: "BUY"
              example:
                - token_id: "0xabc123def456..."
                  price: "0.45"
                  side: "BUY"
                - token_id: "0xdef456abc123..."
                  price: "0.52"
                  side: "SELL"
        "400":
          description: Bad request - Invalid payload or exceeds limit
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalid_payload:
                  summary: Invalid payload
                  value:
                    error: "Invalid payload"
                exceeds_limit:
                  summary: Payload exceeds limit
                  value:
                    error: "Payload exceeds the limit"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
    post:
      summary: Get last trade prices (request body)
      description: |
        Retrieves last trade prices for multiple token IDs using a request body.
        Maximum 500 token IDs can be requested per call.
      operationId: getLastTradesPricesPost
      tags:
        - Market Data
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "#/components/schemas/BookRequest"
            example:
              - token_id: "0xabc123def456..."
              - token_id: "0xdef456abc123..."
      responses:
        "200":
          description: Successfully retrieved last trade prices
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  required:
                    - token_id
                    - price
                    - side
                  properties:
                    token_id:
                      type: string
                      description: Token ID (asset ID)
                      example: "0xabc123def456..."
                    price:
                      type: string
                      description: Last trade price
                      example: "0.45"
                    side:
                      type: string
                      description: Last trade side (BUY or SELL)
                      enum:
                        - BUY
                        - SELL
                      example: "BUY"
              example:
                - token_id: "0xabc123def456..."
                  price: "0.45"
                  side: "BUY"
                - token_id: "0xdef456abc123..."
                  price: "0.52"
                  side: "SELL"
        "400":
          description: Bad request - Invalid payload or exceeds limit
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                invalid_payload:
                  summary: Invalid payload
                  value:
                    error: "Invalid payload"
                exceeds_limit:
                  summary: Payload exceeds limit
                  value:
                    error: "Payload exceeds the limit"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
  /fee-rate:
    get:
      summary: Get fee rate
      description: |
        Retrieves the base fee rate for a specific token ID.
        The fee rate can be provided either as a query parameter or as a path parameter.
      operationId: getFeeRate
      tags:
        - Market Data
      parameters:
        - name: token_id
          in: query
          description: Token ID (asset ID)
          required: false
          schema:
            type: string
          example: "0xabc123def456..."
      responses:
        "200":
          description: Successfully retrieved fee rate
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FeeRate"
              example:
                base_fee: 30
        "400":
          description: Bad request - Invalid token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid token id"
        "404":
          description: Not found - Fee rate not found for market
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "fee rate not found for market"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
  /fee-rate/{token_id}:
    get:
      summary: Get fee rate by path parameter
      description: |
        Retrieves the base fee rate for a specific token ID using the token ID as a path parameter.
      operationId: getFeeRateByPath
      tags:
        - Market Data
      parameters:
        - name: token_id
          in: path
          description: Token ID (asset ID)
          required: true
          schema:
            type: string
          example: "0xabc123def456..."
      responses:
        "200":
          description: Successfully retrieved fee rate
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FeeRate"
              example:
                base_fee: 30
        "400":
          description: Bad request - Invalid token id
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Invalid token id"
        "404":
          description: Not found - Fee rate not found for market
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "fee rate not found for market"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                error: "Internal server error"
components:
  schemas:
    BookRequest:
      type: object
      required:
        - token_id
      properties:
        token_id:
          type: string
          description: Token ID (asset ID)
          example: "0xabc123def456..."
        side:
          type: string
          description: Order side (optional, not used for midpoint calculation)
          enum:
            - BUY
            - SELL
          example: "BUY"
    FeeRate:
      type: object
      required:
        - base_fee
      properties:
        base_fee:
          type: integer
          format: int64
          description: Base fee in basis points
          example: 30
    ErrorResponse:
      type: object
      required:
        - error
      properties:
        error:
          type: string
          description: Error message
